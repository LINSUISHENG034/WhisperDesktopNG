# Phase2 后置集成QA测试计划

## 1. 计划概述

*   **计划名称**: Phase2 后置集成QA测试计划
*   **版本**: 1.0
*   **日期**: 2025-06-29
*   **QA主管**: Gemini

### 1.1 总体目标

验证Phase2中引入的新模型架构支持和多语言能力在WhisperDesktopNG桌面应用中的成功集成和稳定性，确保所有新功能按预期工作，且未引入任何回归问题。

### 1.2 测试范围

本测试计划将覆盖以下核心领域：
*   **新模型加载与转录**: 针对Large-v3和Turbo模型（GGML格式）的加载、识别和转录功能。
*   **多语言转录准确性**: 验证新模型在多语言音频上的转录准确性，特别是对低资源语言的改进。
*   **端到端应用稳定性**: 评估桌面应用在长时间、重复使用新模型时的稳定性、内存管理和性能表现。
*   **现有功能回归**: 确保Phase2的变更没有破坏任何现有功能。

## 2. 测试目标 (阶段性目标)

本测试阶段需要实现以下明确的目标：

*   **目标1: 新模型加载与基本功能验证 (Model Loading & Basic Functionality)**
    *   **验证点**: 桌面应用能够成功加载`ggml-large-v3.bin`和`ggml-large-v3-turbo.bin`模型，并能使用这些模型进行基本的音频转录。
    *   **成功标准**: 模型加载无错误，转录过程顺利完成，输出结果可读且无明显异常。

*   **目标2: 多语言转录准确性验证 (Multilingual Transcription Accuracy)**
    *   **验证点**: 桌面应用使用Large-v3多语言模型时，能够准确识别并转录多种非英语音频，特别是报告中提及的低资源语言（如孟加拉语、斯瓦希里语、高棉语等）。
    *   **成功标准**: 转录结果与预期文本高度匹配，语言识别准确，低资源语言的词错误率有可感知改善。

*   **目标3: 端到端稳定性与性能初步评估 (End-to-End Stability & Performance)**
    *   **验证点**: 桌面应用在使用新模型进行长时间或重复转录时，保持稳定运行，无崩溃、无明显内存泄漏，且性能表现合理。
    *   **成功标准**: 应用在连续转录10次后无崩溃，VRAM使用量稳定，长时间转录（例如5-10分钟音频）无异常中断。

*   **目标4: 现有功能回归测试 (Regression Testing)**
    *   **验证点**: 确认Phase2的变更没有对现有模型（如`ggml-small.bin`）的加载和转录功能，以及桌面应用的其他核心UI/UX功能造成负面影响。
    *   **成功标准**: 所有现有功能按预期工作，无任何功能性或性能上的退化。

## 3. 测试用例与场景

以下是需要执行的关键测试用例和场景：

### 3.1 新模型加载与转录
*   **TC-P2-001**: 加载`ggml-large-v3.bin`模型，转录`Tests/Audio/jfk.wav`。
    *   **预期**: 模型成功加载，转录完成，输出文本准确。
*   **TC-P2-002**: 加载`ggml-large-v3-turbo.bin`模型，转录`Tests/Audio/jfk.wav`。
    *   **预期**: 模型成功加载，转录完成，输出文本准确。
*   **TC-P2-003 (负面测试)**: 尝试加载一个不存在或损坏的Large-v3/Turbo模型文件。
    *   **预期**: 应用给出明确的错误提示，不崩溃。

### 3.2 多语言转录准确性
*   **TC-P2-004**: 加载`ggml-large-v3-multilingual.bin`模型（或等效的多语言模型），转录至少3个不同非英语语言的音频文件（例如：中文、日文、德文）。
    *   **预期**: 语言识别准确，转录文本与预期内容高度匹配。
*   **TC-P2-005**: 如果有条件，转录至少2个低资源语言的音频文件（例如：孟加拉语、斯瓦希里语）。
    *   **预期**: 转录结果质量有可感知改善，词错误率低于旧模型。
*   **TC-P2-006**: 如果有条件，转录一个包含多种语言混合的音频文件。
    *   **预期**: 应用能够识别并转录不同语言片段，保持连贯性。

### 3.3 端到端稳定性与性能初步评估
*   **TC-P2-007**: 使用`ggml-large-v3.bin`模型，对`jfk.wav`进行连续10次转录。
    *   **预期**: 应用无崩溃，每次转录输出一致，VRAM使用量在每次转录结束后能回落到稳定水平（使用任务管理器/GPU-Z监控）。
*   **TC-P2-008**: 使用`ggml-large-v3.bin`模型，转录一个时长5-10分钟的音频文件。
    *   **预期**: 转录过程顺利完成，无中断，无崩溃，输出完整。
*   **TC-P2-009**: 测量`ggml-large-v3.bin`模型转录`jfk.wav`的耗时（作为初步性能参考）。
    *   **预期**: 耗时合理，与Phase1报告中的估算值大致相符。

### 3.4 现有功能回归测试
*   **TC-P2-010**: 加载`ggml-small.bin`模型，转录`Tests/Audio/jfk.wav`。
    *   **预期**: 模型成功加载，转录完成，输出文本准确，性能与Phase1前一致。
*   **TC-P2-011**: 验证桌面应用的基本UI交互（如：开始/停止按钮、设置菜单、模型选择下拉列表等）。
    *   **预期**: 所有UI元素响应正常，功能无异常。
*   **TC-P2-012**: 验证音频输入/输出功能（如：麦克风输入、播放转录音频等，如果应用支持）。
    *   **预期**: 音频功能正常工作。

## 4. 测试环境

*   **操作系统**: Windows 10 / Windows 11 (推荐最新版本)
*   **硬件**: 具备DirectCompute支持的GPU (例如：NVIDIA GeForce系列, AMD Radeon系列)
*   **软件**: WhisperDesktopNG的最新编译版本 (Release配置)
*   **模型文件**: 
    *   `ggml-large-v3.bin`
    *   `ggml-large-v3-turbo.bin`
    *   `ggml-large-v3-multilingual.bin` (或等效的GGML格式多语言模型)
    *   `ggml-small.bin` (用于回归测试)
*   **音频文件**: 
    *   `Tests/Audio/jfk.wav` (标准测试文件)
    *   多种非英语音频样本 (中文、日文、德文等)
    *   如果可能，提供低资源语言音频样本 (孟加拉语、斯瓦希里语、高棉语等)
    *   如果可能，提供混合语言音频样本。
*   **监控工具**: 任务管理器 (Task Manager), GPU-Z (可选，用于更详细的GPU监控)

## 5. 测试报告要求

开发团队需将测试结果提交至 `Docs/implementation/phase2/Phase2_QA_Test_Report.md` 文件。报告应包含以下内容：

*   **测试环境**: 详细说明测试所用的操作系统、硬件配置、WhisperDesktopNG版本。
*   **测试总结表格**: 一个清晰的表格，列出所有测试用例（TC-P2-XXX），其执行状态（PASS/FAIL），以及简要的观察结果。
*   **失败用例详情**: 对于任何标记为FAIL的测试用例，提供以下详细信息：
    *   测试用例ID
    *   重现步骤
    *   实际结果 vs 预期结果
    *   错误信息、日志片段或截图（如果适用）
*   **稳定性与性能观察**: 记录TC-P2-007、TC-P2-008和TC-P2-009的详细观察结果，包括VRAM变化、转录耗时等。
*   **总体发现与建议**: 对本次测试的整体评估，包括发现的任何问题、亮点，以及是否建议进入Phase3的结论。

## 6. 提交与审核流程

1.  开发团队按照本测试计划执行所有测试用例。
2.  将测试结果详细记录在 `Docs/implementation/phase2/Phase2_QA_Test_Report.md` 文件中。
3.  完成测试报告后，通知QA主管进行审核。
4.  QA主管将根据报告内容和必要时的复现验证，给出最终的审核结论和下一步指示。

---
